# PDF Customization Feature

This document explains how to use the new PDF customization feature that allows super admins to personalize PDF exports with company-specific settings.

## Feature Overview

The PDF customization feature allows super admins and root users to:
- Add custom company names to PDF headers
- Include company logos in PDFs
- Customize color schemes for PDFs
- Control whether "Powered by Nexistry Digital Solutions" appears
- Add custom footer text to PDFs

## Accessing PDF Settings

1. Super admins and root users can access PDF Settings through the sidebar navigation
2. Navigate to "PDF Settings" in the sidebar
3. Select a company from the list to customize its PDF export settings

## PDF Settings Options

### Company Name
- Replaces "Task Flow Pro" in the PDF header
- Appears in the top-left corner of the PDF

### Logo URL
- Adds a company logo to the PDF header
- Must be a publicly accessible image URL
- Appears to the left of the company name

### Primary Color
- Controls the header background color
- Used for chart colors and accents
- Default: #3B82F6 (blue)

### Secondary Color
- Used for secondary elements in charts
- Default: #10B981 (green)

### Show "Powered by Nexistry"
- Toggle to show or hide "Powered by Nexistry Digital Solutions" in the footer
- Enabled by default

### Custom Footer Text
- Replaces the default "Generated by NexiFlow Powered by Nexistry Digital Solutions" text
- Appears in the bottom-left of the PDF footer

## Technical Implementation

### Data Structure
PDF settings are stored in the company object in the database:
```typescript
interface PDFSettings {
  companyName: string
  logoUrl: string
  primaryColor: string
  secondaryColor: string
  showPoweredBy: boolean
  customFooterText: string
}
```

### Services
- `pdfSettingsService.ts` - Manages PDF settings for companies
- Functions include:
  - `getPDFSettings(companyId: string)` - Retrieve settings for a company
  - `updatePDFSettings(companyId: string, pdfSettings: PDFSettings)` - Update settings for a company
  - `initializePDFSettings(companyId: string)` - Initialize default settings for a company

### Components
- `PDFSettingsForm.tsx` - Form component for managing PDF settings
- `PDFSettings.tsx` - Main page for PDF settings management

### PDF Export Functions
- Updated `generateClientReportPDF` and `generateIndividualClientPDF` to use PDF settings
- Functions now accept `pdfSettings` and `companyId` parameters

## Permissions

Only super admins and root users can access and modify PDF settings:
- Super Admin: Full access to all companies' PDF settings
- Root: Full access to all companies' PDF settings
- Other roles: No access to PDF settings

## Usage Examples

### Customizing a Company's PDF Settings
1. Navigate to PDF Settings page
2. Select a company from the list
3. Fill in the desired settings:
   - Company Name: "Acme Corporation"
   - Logo URL: "https://acme.com/logo.png"
   - Primary Color: "#FF0000" (red)
   - Secondary Color: "#00FF00" (green)
   - Show "Powered by Nexistry": Checked
   - Custom Footer Text: "Confidential - For Internal Use Only"
4. Click "Save PDF Settings"

### Generating a Customized PDF
1. Navigate to the Clients page
2. Select a time period and show the time chart
3. Click "Export All Clients PDF" or the export icon for an individual client
4. The generated PDF will use the company's custom settings

## Limitations

1. Logo images must be publicly accessible URLs
2. Color customization is limited to primary and secondary colors
3. Only super admins and root users can modify settings
4. Changes to PDF settings affect all future PDF exports for that company

## Future Enhancements

Potential improvements for future versions:
1. Image upload functionality for logos instead of URLs
2. More color customization options
3. Custom fonts and styling
4. Template selection for different PDF layouts
5. Watermark support